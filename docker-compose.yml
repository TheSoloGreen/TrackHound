services:
  trackhound:
    build: .
    container_name: trackhound
    ports:
      - "8383:8000"
    volumes:
      # Data persistence (SQLite database)
      - /mnt/user/appdata/trackhound:/app/data
      # Helheim media (adjust paths to match your Unraid shares)
      - /mnt/user/Media/Movies:/media/helheim/movies:ro
      - /mnt/user/Media/TV Shows:/media/helheim/tv:ro
      # Yggdrasil media (mount via Unassigned Devices or remote share)
      # - /mnt/remotes/yggdrasil/media/Anime/Anime (Sub):/media/yggdrasil/anime-sub:ro
      # - /mnt/remotes/yggdrasil/media/Anime/Anime Movies:/media/yggdrasil/anime-movies:ro
      # - /mnt/remotes/yggdrasil/media/Movies:/media/yggdrasil/movies:ro
      # - /mnt/remotes/yggdrasil/media/TV Shows:/media/yggdrasil/tv:ro
    environment:
      - SECRET_KEY=${SECRET_KEY:?Set SECRET_KEY in .env}
      - ENCRYPTION_KEY=${ENCRYPTION_KEY:?Set ENCRYPTION_KEY in .env}
      - DATABASE_URL=sqlite+aiosqlite:///./data/trackhound.db
      - CORS_ORIGINS=${CORS_ORIGINS:-http://localhost:8383}
      - ENVIRONMENT=production
    restart: unless-stopped
